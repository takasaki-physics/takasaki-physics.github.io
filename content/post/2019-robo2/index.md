---
title: ロボットの設計のやり方2 ～部品編～
description: 先輩(2019年)からの技術継承2
slug: 2019-robo2
date: 2019-08-01 17:36:14+0900
categories:
    - ハードウェア
    - Archive
tags: 
    - Archive_2019
    - ロボ設計
---

## 編集者から
こちらは、先輩が作成したtxt文章を物理部パソコンから発見し、こちらのサイト向けに書き直したものです。<br />
忙しい中、このような素晴らしい記事を書いてくださった先輩に、感謝の意を表します。<br />

## はじめに
機体の仕様も決まったところで、次に決めるのは、「何の部品(パーツ)を載せるのか」です。<br />
基本的な部品から、あったら強くなれるかもしれないものまで、
知っているのを挙げておきます。

## 必需品
まずは、これがなかったら始まらないものから説明します。

### マイコン
マイクロコンピューターの略。今のパソコンはこれの超上位互換です。<br />
物理部ではArduinoというものを使っています。<br />
大会で使うArduino MEGAは、15のアナログピン(いらない)、50のデジタルピン(いる)を備え、うち11のPWMピン、6の割り込みピンがあります。<br />
(PWMというのは、簡単に言えば、波を出力できるピンのことです)

ちなみに、Arduino以外にも、PICやラズベリーパイ(ラズパイ)というのもあります。<br />
前者は昔から使われてきたもので、後者は一応ガチのパソコンです。用途に合わせて使い分けましょう。

### モーターとモータードライバ
モーターに関しては説明する必要はないでしょう。片方に+、もう片方に-をつなげば回転し、逆につなげば逆回転します。<br />
それでは+と-をどこにつなげばいいでしょうか?<br />
マイコンで制御するのでマイコンにつなぎたいところですが、マイコンは大電流を流すことができないのです。(というか壊れます)<br />
そこでモータードライバを使います。一方の組をマイコンにつなぐと、それに対応するもう一方の組に大電流を流してくれる部品です。<br />
これがないと話にならない、地味に重要な部品です。<br />
物理部では東芝の*TA8429HQ*を使っているが、生産停止になっています。まだ6個くらいはあったはずです。

(編集者より: この文章はやや古い文章なので、現在の物理部にはない可能性が高いです。)

### 赤外線センサー
ライトウェイトのボールは赤外線を出すボールなので、ボールを「見る」ためには赤外線センサーが必要となります。<br />
物理部では*PL-IRM2121*というのを使っている…のですが、このセンサー、アクティブロー出力(感知すると出力がLOWになる)で、しかもつけっぱなしにしてると感度が低下するのです。<br />
そこで、高速でオンオフを繰り返していて、そのスイッチににトランジスタを使っています。(理由は不明)<br />
なお、設計・はんだ付け時は向きに気を付けてください(６敗)

### LEDとフォトトランジスタ
フォトトランジスタは当たる光の大きさによって抵抗が変わる抵抗です。(大きいほど小さくなります。)<br />
そこでLEDの光が床に反射してフォトトランジスタに入ってくるようにすると、床の色によって反射の仕方が変わります。これによってラインセンサーを作っています。<br />
LEDに大電流を流すと壊れます。また、明るいとそれだけ電力を使うので気を付けてくださいね。<br />
はんだ付け時にはアノード・カソードにも気を付けてください。<br />
さらに、ラインセンサーは壊れやすいので、いくつか予備を作っておきましょう。

### 地磁気センサー
文字通り地磁気を読みとるセンサー。(別名: コンパス)<br />
無くても動きますが、これがないと「前」が分からなくなるので、準必需品です。<br />
情報のやり取りにはシリアル通信というのを使います。(詳しくは自身で調べてみてください)<br />
3軸なので、水平を保たないと調整がずれます。また、回路から影響をうけるので少し離すとよいでしょう。<br />
これもよく故障するので、予備を買っておきましょう。

## あると便利なもの
あると便利なものを書いておきます。もちろん、これ以外にも便利な部品は存在します。

### コンパレータとORゲート、可変抵抗
これらはラインセンサーに使っている部品です。<br />
コンパレータは2つの入力(AとBとしよう)の電圧を比較し、A > Bなら<kbd>HIGH</kbd>、A < Bなら<kbd>LOW</kbd>を出力する回路部品です。<br />
つまり、Bを基準にしてAと比較した結果を出力します。<br />
これを利用することで、アナログピンが不要になります。<br />
また、基準電圧を変えるのに可変抵抗を使います。<br />
オームの法則 *V=RI* に従って、抵抗を通過した電流は電圧降下するので、うまくやると電圧を変えることができます。(分圧といいます。詳しくはメモを参照してください。)<br />
ORゲートはAとBのどちらかが<kbd>HIGH</kbd>なら<kbd>HIGH</kbd>を出力する回路部品です。<br />
これを使うことで、フォトトランジスタを複数搭載できます。<br />
コンパレータとORゲートは精密部品なので、+-を逆にしたり、はんだ付け時に暖めすぎると壊れるので、ICソケットを使うのが良いでしょう。<br />
また、コンパレータは出力ピンをプルアップする必要があります。忘れないようにしてくださいね。

### *HC-SR04*(超音波センサ)
2つの筒がついているセンサーで、片方が超音波を出し、反射したのをもう片方が受け取ります。<br />
それによって壁までの距離をはかるセンサーです。<br />
電源以外に*Echo*と*Trig*のピンがあり、*Trig*に<kbd>HIGH</kbd>を流すと波が出て、*Echo*で受信します。<br />
PWMを使うのか使わないのかよくわからないのと、取得するまでの間プログラムが止まるらしいのとで、結局実用化できませんでした。<br />
(マイコンを2台搭載してみましたが、シリアル通信だとコンパスと同時に使えないっぽいことに今更気づきました。<br />
他のチームを参考にしてみてください。)

### ジャイロセンサと加速度センサ
文字通り回転や加速度を検知するセンサです。<br />
これらを使うことで、コンパスセンサがなくても向きを判断できたり、<br />
「前進しているのに加速度が変わらない→動いてない＝ぶつかっている」みたいなことができたりします。<br />
また、コンパス、ジャイロ、加速度を同時に測れる9軸センサというのもあります。<br />
これをつければ戦略の幅が広がること間違いないです。もっとも、使いこなせればの話ですが…。<br />

### ソレノイド(キッカー)と昇圧回路
ソレノイドとはコイルのことです。<br />
電流を流すと内部に磁場が生じ、それによって、棒を押しだす部品です。<br />
これを付けると、ボールを「蹴る」ことができるようになり、遠くからボールを相手のゴールにシュートできます。<br />
また、一気に大きな電流を流すと、蹴りがより強くなります。<br />
というわけで大電流を流したいのですが…さっき書いた通り、マイコンにそんな力はないです。<br />
そこで昇圧回路を使います。<br />
簡単に言うと、まずコンデンサに電気をちょっとずつ貯めておき、必要になったらそれを一気に放出する、というものです。<br />
ボールを保持していることの判断がちょっと大変だったり、パワーに制限があって調整する必要だったり、<br />
ソレノイド自身がそこそこ重かったりします。<br />
これを搭載したロボットを作るのが目標なのですが、出来上がるのはいつになるのでしょうか…<br />

## ちょっとしたやつ
上で挙げたもの以外のちょっとしたものを一応説明しておきます。<br />

- コンデンサ: 電気をちょっと貯められる。<br />
電池だけだとたまに「足りなくなる」ときがあるので、それに備えるためにあったりする。<br />
電解コンデンサには+-の向きがあるので注意。

- ヒューズ: 保護装置。<br />
大電流が流れたとき、これが物理的に切れる。<br />
Li-ion電池を使うなら必ずつけること。<br />
(過充電・過放電の対策も必ずすること。)

- XAコネクタ: 今使っているコネクタ。<br />
実は穴(?)の間隔はピンヘッダと同じである。

- ターミナルブロック: ねじで導線をつなぐやつ。<br />
モーターや電池と基板との接続に使っている。<br />
でもコネクタのほうが便利?

- 鈴メッキ線: 基板の表面の配線(ジャンパ線)に使っている。

- ピンヘッダ: ――■- ←みたいなやつ。オスとメスがある。